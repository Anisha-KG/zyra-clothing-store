<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Create Account</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #eee9e9;
      margin: 0;
    }
    .card-custom {
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 40px 60px rgba(14, 13, 13, 0.25);
      height: 92vh; /* ðŸ‘ˆ Slightly less than full screen */
      margin: 2vh 0; /* ðŸ‘ˆ Small gap top and bottom */
    }
    .form-section {
      display: flex;
      justify-content: center;
      align-items: center; /* ðŸ‘ˆ centers vertically */
      height: 100%;
      padding: 1.5rem;
    }
    .form-wrapper {
      width: 100%;
      max-width: 380px; /* ðŸ‘ˆ keeps form compact & centered */
    }
    .form-section h3 {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      text-align: center;
      color: #7c3b2c;
    }
    .form-control {
      font-size: 0.85rem;
      padding: 0.45rem 0.55rem;
      margin-bottom: 0.5rem;
      border-radius: 6px;
    }
    .error-msg {
      font-size: 0.75rem;
      color: red;
      margin-bottom: 0.4rem;
    }
    .btn-signup {
      background-color: #8c4c35;
      color: #fff;
      font-weight: 500;
      font-size: 0.9rem;
      padding: 0.55rem;
      width: 75%;
      border: none;
      border-radius: 6px;
      display: block;
      margin: 0 auto; /* ðŸ‘ˆ centers button */
    }
    .btn-signup:hover {
      background-color: #733b28;
    }
    .google-btn {
      border: 1px solid #c4c4c4;
      background-color: #fff;
      border-radius: 6px;
      padding: 0.45rem;
      font-weight: 500;
      font-size: 0.85rem;
      width: 75%;
      margin: 0.5rem auto 0; /* ðŸ‘ˆ centered */
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .google-btn img {
      height: 16px;
      margin-right: 6px;
    }
    .login-link {
      text-align: center;
      margin-top: 0.75rem;
      font-size: 0.85rem;
    }
    .login-link a {
      font-weight: bold;
      color: #7c3b2c;
      text-decoration: none;
    }
    .login-link a:hover {
      text-decoration: underline;
    }
    .create-Account{
        font-family: Arial, Helvetica, sans-serif;
        font-size: 1.8rem !important;
    }
    .or-divider {
      position: relative;
      text-align: center;
      margin: 1rem 0;
    }
    .or-divider hr {
      margin: 0;
    }
    .or-divider span {
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      padding: 0 10px;
      font-size: 14px;
      color: #6c757d;
    }
    .error-msg{
        color: red;
        font-size: 0.75rem;
        display: none;
    }
  </style>
</head>
<body>
  <div class="container-fluid d-flex align-items-center justify-content-center" style="min-height:100vh;">
    <div class="row card-custom bg-white w-100" style="max-width: 900px;">
      
      <!-- Left Form Section -->
      <div class="col-md-6 form-section">
        <div class="form-wrapper">
          <h3 class="fw-bold create-Account">Create Account</h3>

          <!-- Google Signup -->
          <a href="/auth/google" style="text-decoration: none;">
            <div class="google-btn">
              <img src="https://img.icons8.com/color/24/000000/google-logo.png" alt="Google">
              <span>Sign Up with Google</span>
            </div>
          </a>

          <!-- Error Message -->
          <% if(locals.message && message.length > 0){ %>
            <div class="alert alert-danger text-center mt-2">
              <%= message %>
            </div>
          <% } %>

          <!-- Divider -->
          <div class="or-divider">
            <hr>
            <span>or</span>
          </div>

          <!-- Signup Form -->
          <form id="signupForm" method="post" action="/signup" novalidate>
            <input type="text" id="name" class="form-control" name="name" placeholder="Full Name">
            <div id="error1" class="error-msg"></div>

            <input type="email" id="email" class="form-control" name="email" placeholder="Email">
            <div id="error2" class="error-msg"></div>

            <input type="text" id="phone" class="form-control" name="phone" placeholder="Phone Number">
            <div id="error3" class="error-msg"></div>

            <input type="text" id="referralCode" class="form-control" name="referralCode" placeholder="Referral code (Optional)">

            <input type="password" id="password" class="form-control" name="password" placeholder="Password">
            <div id="error4" class="error-msg"></div>

            <input type="password" id="confirm-password" class="form-control" name="cpassword" placeholder="Confirm Password">
            <div id="error5" class="error-msg"></div>

            <button type="submit" class="btn btn-signup">Sign Up</button>
          </form>

          <!-- Login Link -->
          <div class="login-link">
            Already have an account? <a href="/login">Login</a>
          </div>
        </div>
      </div>

      <!-- Right Image Section -->
      <div class="col-md-6 d-none d-md-block p-0">
        <img src="/images/signupimage.jpg" alt="Signup" class="img-fluid h-100 w-100" style="object-fit: cover;">
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

<script>
    const nameid=document.getElementById('name')
    const emailid=document.getElementById('email')
    const phoneid=document.getElementById('phone')
    const passwordid=document.getElementById('password')
    const cpasswordid=document.getElementById('confirm-password')
    const error1=document.getElementById('error1')
    const error2=document.getElementById('error2')
    const error3=document.getElementById('error3')
    const error4=document.getElementById('error4')
    const error5=document.getElementById('error5')
    const signupForm=document.getElementById('signupForm')


    function nameValidateChecking(e){
        const nameVal=nameid.value 
        const namePattern=/^[a-zA-Z\s]{2,30}$/;

        if(nameVal.trim()==""){
            error1.style.display='block'
            error1.innerHTML="Please enter a valid name"
        }else if(!namePattern.test(nameVal)){
            error1.style.display='block'
            error1.innerHTML="name can only contain alphabets and spaces"
        }else{
            error1.style.display="none"
            error1.innerHTML=""
        }
    }

    function emailValidateChecking(e){
      const emailval = emailid.value;
      const emailpattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
        if(emailval.trim()==""){
            error2.style.display="block"
            error2.innerHTML="Email is Required"
        }else if(!emailpattern.test(emailval)){
          error2.style.display = 'block';
          error2.innerHTML = 'Please Enter a Valid Email';
      } else {
          error2.style.display = 'none';
          error2.innerHTML = '';
      }
  }

  function phoneValidateCheching(e){
      const phoneval = phoneid.value;
      const phonepattern = /^[0-9]{10}$/;

      if(phoneval.trim() == ''){
          error3.style.display = 'block';
          error3.innerHTML = 'Please Enter a Valid Phone Number';
      } else if(!phonepattern.test(phoneval)){
          error3.style.display = 'block';
          error3.innerHTML = 'Please Enter a Valid Phone Number';
      } else {
          error3.style.display = 'none';
          error3.innerHTML = '';
      }
  }

  function passwordValidateChecking(e){
    const passwordVal=passwordid.value.trim()
    const cpasswordVal=cpasswordid.value
    const alpha=/[a-zA-Z]/
    const digit=/\d/

    if(passwordVal==""){
        error4.style.display="block"
        error4.innerHTML="Password is Required"
    }else if(!alpha.test(passwordVal)||!digit.test(passwordVal)){
        error4.style.display="block"
        error4.innerHTML="Password must contail atleast one alphabet or digit"
    }else if(passwordVal.length<6){
        error4.style.display="block"
        error4.innerHTML="Password must be atleast 6 characters long"
    }
    
    else{
        error4.style.display="none"
        error4.innerHTML=""
    }

    if(cpasswordVal==""){
        error5.style.display="block"
        error5.innerHTML="Confirm Password is Reguired"
    }else if(passwordVal!==cpasswordVal){
        error5.style.display="block"
        error5.innerHTML="Password doesnot Match"
    }else{
        error5.style.display="none"
        error5.innerHTML=""
    }
  }


    document.addEventListener('DOMContentLoaded',function(){
        signupForm.addEventListener('submit',function(e){
            nameValidateChecking()
            emailValidateChecking()
            phoneValidateCheching()
            passwordValidateChecking()


            if(!nameid||
                !emailid||
                !phoneid||
                !passwordid||
                !cpasswordid||
                !signupForm||
                !error1||
                !error2||
                !error3||
                !error4||
                !error5
            ){
                console.error("one or more elements are not found")
            }

            if(
                error1.innerHTML||
                error2.innerHTML||
                error3.innerHTML||
                error4.innerHTML||
                error5.innerHTML
            ){
                e.preventDefault()
            }
        })
    })
</script>
</html>
